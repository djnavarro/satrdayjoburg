<!DOCTYPE html>
<html>
  <head>
    <title>Data Visualisation in R</title>
    <meta charset="utf-8">
    <meta name="author" content="  Danielle Navarro    <span>&lt;i class="fab  fa-twitter faa-float animated "&gt;&lt;/i&gt; @djnavarro</span>" />
    <link href="libs/remark-css/kunoichi.css" rel="stylesheet" />
    <link href="libs/remark-css/ninjutsu.css" rel="stylesheet" />
    <link href="libs/font-awesome-animation/font-awesome-animation-emi.css" rel="stylesheet" />
    <script src="libs/fontawesome/js/fontawesome-all.min.js"></script>
    <link rel="stylesheet" href="assets\ninpo.css" type="text/css" />
    <link rel="stylesheet" href="assets\danielle.css" type="text/css" />
  </head>
  <body>
    <textarea id="source">
class: center, middle, inverse, title-slide

# Data Visualisation in R
## From ggplot2 to gganimate
### <br><br>Danielle Navarro    <span>&lt;i class="fab  fa-twitter faa-float animated "&gt;&lt;/i&gt; @djnavarro</span>
### <a href='https://djnavarro.github.io/satrdayjoburg/'>https://djnavarro.github.io/satrdayjoburg/</a><br><br>5 April 2019

---




class: split-two bg-main1

.column.bg-main1[.content.vmiddle.center[

# Data visualisation


]]

.column.bg-main3[.content.vmiddle.center[

&lt;img src="images/horst_ggplot.png", width="70%"&gt;

[@allison_horst](https://twitter.com/allison_horst)

]]



&lt;!-- *********** NEW SLIDE ************** --&gt;
---

class: bg-main1 center middle hide-slide-number

.reveal-text.bg-main2[.pad1[
.font4[A plot of the Sydney Beaches data]
]]





&lt;!-- *********** NEW SLIDE ************** --&gt;
---

class: bg-main1 middle center

.pull.left[.pad1[.font2[

```r
# load data
beaches &lt;- read_csv(here("data","sydneybeaches3.csv")) 

# show data
beaches
```

```
## # A tibble: 344 x 12
##    date        year month   day season rainfall temperature enterococci
##    &lt;date&gt;     &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;  &lt;dbl&gt;    &lt;dbl&gt;       &lt;dbl&gt;       &lt;dbl&gt;
##  1 2013-01-02  2013     1     2      1      0          23.4         6.7
##  2 2013-01-06  2013     1     6      1      0          30.3         2  
##  3 2013-01-12  2013     1    12      1      0          31.4        69.1
##  4 2013-01-18  2013     1    18      1      0          46.4         9  
##  5 2013-01-24  2013     1    24      1      0          27.5        33.9
##  6 2013-01-30  2013     1    30      1      0.6        26.6        26.5
##  7 2013-02-05  2013     2     5      1      0.1        25.7        66.9
##  8 2013-02-11  2013     2    11      1      8          22.2       118. 
##  9 2013-02-17  2013     2    17      1     13.6        26.3        75  
## 10 2013-02-23  2013     2    23      1      7.2        24.8       311. 
## # ... with 334 more rows, and 4 more variables: day_num &lt;dbl&gt;,
## #   month_num &lt;dbl&gt;, month_name &lt;chr&gt;, season_name &lt;chr&gt;
```
]]]





&lt;!-- *********** NEW SLIDE ************** --&gt;
---
class: split-40 bg-main1

.column.bg-main1[.content.vtop.center[

.pull.left[.pad1[.font2[

A simple plot


```r
ggplot(
  beaches, 
  aes(temperature, rainfall)
) + 
geom_point()
```

- A little verbose?
- Not the prettiest plot?
- Why is it like this?

]]]
]]

.column.bg-main3[.content.vtop.center[
.pad1[.font2[
![](slides_files/figure-html/introplot-1.png)&lt;!-- --&gt;

]]
]]




&lt;!-- *********** NEW SLIDE ************** --&gt;
---

class: white bg-black center middle hide-slide-number

.pad1[
.font4[
Exercise 01&lt;br&gt;
]]




&lt;!-- *********** NEW SLIDE ************** --&gt;
---

class: bg-main1 center middle hide-slide-number

.reveal-text.bg-main2[.pad1[
.font4[Painting a Picture]
]]





&lt;!-- *********** NEW SLIDE ************** --&gt;
---
class: split-50 bg-main1

.column.bg-main1[.content.vtop.center[

.pull.left[.pad1[.font2[

.center[
# ggplot2 is...
]
&lt;br&gt;

## A grammar...

- grammars compose &amp; reuse small parts
- complex structures from simpler units

## ...of graphics

- uses the "painters model"
- a plot is built in layers
- each layer is drawn on top of the last

]]]
]]

.column.bg-main3[.content.vmiddle.center[

&lt;img src="images/trinity-treft-696428-unsplash.jpg", width="70%"&gt;

[Image credit: Trinity Treft](https://unsplash.com/photos/waYWz3vAYJQ)

]]







&lt;!-- *********** NEW SLIDE ************** --&gt;
---
class: split-50 bg-main1

.column.bg-main1[.content.vtop.center[

.pull.left[.pad1[.font2[

A blank canvas


```r
ggplot()
```

]]]
]]

.column.bg-main3[.content.vtop.center[
.pad1[.font2[
![](slides_files/figure-html/blankcanvas-1.png)&lt;!-- --&gt;

]]
]]






&lt;!-- *********** NEW SLIDE ************** --&gt;
---
class: split-50 bg-main1

.column.bg-main1[.content.vtop.center[
.pull.left[.pad1[.font2[
Specify the .orange[data]

```r
ggplot(
* data = beaches
)
```

]]]
]]

.column.bg-main3[.content.vtop.center[
.pad1[.font2[
![](slides_files/figure-html/stillblankcanvas-1.png)&lt;!-- --&gt;

]]
]]




&lt;!-- *********** NEW SLIDE ************** --&gt;
---
class: split-50 bg-main1

.column.bg-main1[.content.vtop.center[

.pull.left[.pad1[.font2[
A .orange[mapping] from data onto plot .orange[aesthetics]

```r
ggplot(
  data = beaches,
* mapping = aes(
*   x = temperature,
*   y = rainfall
* )
)
```


- .orange[x]-axis location
- .orange[y]-axis location
- .orange[colour] of marker
- .orange[fill] of a marker
- .orange[shape] of a marker, etc.
]]]
]]

.column.bg-main3[.content.vtop.center[
.pad1[.font2[
![](slides_files/figure-html/aesthetics-1.png)&lt;!-- --&gt;

]]
]]





&lt;!-- *********** NEW SLIDE ************** --&gt;
---
class: split-50 bg-main1

.column.bg-main1[.content.vtop.center[

.pull.left[.pad1[.font2[
Add a plot .orange[layer]

```r
ggplot(
  data = beaches,
  mapping = aes(
    x = temperature, 
    y = rainfall
  ) 
) + 
*geom_point()
```

- the .orange[points]
- the .orange[lines]
- the .orange[histograms]
- etc

]]]
]]

.column.bg-main3[.content.vtop.center[
.pad1[.font2[
![](slides_files/figure-html/add_layer-1.png)&lt;!-- --&gt;

]]
]]



&lt;!-- *********** NEW SLIDE ************** --&gt;
---
class: split-50 bg-main1

.column.bg-main1[.content.vtop.center[

.pull.left[.pad1[.font2[
Add layer-specific parameters

```r
ggplot(
  data = beaches,
  mapping = aes(
    x = temperature, 
    y = rainfall
  ) 
) + 
*geom_point(size = 3)
```

]]]
]]

.column.bg-main3[.content.vtop.center[
.pad1[.font2[
![](slides_files/figure-html/add_fixedaesthetic-1.png)&lt;!-- --&gt;

]]
]]






&lt;!-- *********** NEW SLIDE ************** --&gt;
---
class: split-50 bg-main1

.column.bg-main1[.content.vtop.center[

.pull.left[.pad1[.font2[
Add layer-specific mappings

```r
ggplot(
  data = beaches,
  mapping = aes(
    x = temperature, 
    y = rainfall
  ) 
) + 
geom_point(
* mapping = aes(colour = season_name),
  size = 3
)   
```

]]]
]]

.column.bg-main3[.content.vtop.center[
.pad1[.font2[
![](slides_files/figure-html/add_layeraesthetic-1.png)&lt;!-- --&gt;

]]
]]






&lt;!-- *********** NEW SLIDE ************** --&gt;
---
class: split-50 bg-main1

.column.bg-main1[.content.vtop.center[

.pull.left[.pad1[.font2[
Add more layers to the plotcake

```r
ggplot(
  data = beaches,
  mapping = aes(
    x = temperature, 
    y = rainfall
  ) 
) + 
geom_point(
  mapping = aes(colour = season_name),
  size = 3
) + 
*geom_rug()
```

]]]
]]

.column.bg-main3[.content.vtop.center[
.pad1[.font2[
![](slides_files/figure-html/two_layers-1.png)&lt;!-- --&gt;

]]
]]



&lt;!-- *********** NEW SLIDE ************** --&gt;
---
class: split-50 bg-main1

.column.bg-main1[.content.vtop.center[

.pull.left[.pad1[.font2[
Split into .orange[facets]

```r
ggplot(
  data = beaches,
  mapping = aes(
    x = temperature, 
    y = rainfall
  ) 
) + 
geom_point(
  mapping = aes(colour = season_name), 
  size = 2
) + 
geom_rug() + 
*facet_wrap(vars(season_name))
```

]]]
]]

.column.bg-main3[.content.vtop.center[
.pad1[.font2[
![](slides_files/figure-html/add_facets-1.png)&lt;!-- --&gt;

]]
]]





&lt;!-- *********** NEW SLIDE ************** --&gt;
---
class: split-50 bg-main1

.column.bg-main1[.content.vtop.center[

.pull.left[.pad1[.font2[
Remove an unwanted legend?

```r
ggplot(
  data = beaches,
  mapping = aes(
    x = temperature, 
    y = rainfall
  ) 
) + 
geom_point(
  mapping = aes(colour = season_name), 
  size = 2,
* show.legend = FALSE
) + 
geom_rug() + 
facet_wrap(vars(season_name)) 
```

]]]
]]

.column.bg-main3[.content.vtop.center[
.pad1[.font2[
![](slides_files/figure-html/remove_legend-1.png)&lt;!-- --&gt;

]]
]]



&lt;!-- *********** NEW SLIDE ************** --&gt;
---
class: split-50 bg-main1

.column.bg-main1[.content.vtop.center[

.pull.left[.pad1[.font2[
Modify the .orange[theme]

```r
ggplot(
  data = beaches,
  mapping = aes(
    x = temperature, 
    y = rainfall
  ) 
) + 
geom_point(
  mapping = aes(colour = season_name), 
  size = 2,
  show.legend = FALSE 
) + 
geom_rug() + 
facet_wrap(vars(season_name)) + 
*theme_bw()
```

]]]
]]

.column.bg-main3[.content.vtop.center[
.pad1[.font2[
![](slides_files/figure-html/add_theme-1.png)&lt;!-- --&gt;

]]
]]





&lt;!-- *********** NEW SLIDE ************** --&gt;
---
class: split-50 bg-main1

.column.bg-main1[.content.vtop.center[

.pull.left[.pad1[.font2[
(Nothing to see here...)

```r
ggplot(
  data = beaches,
  mapping = aes(
    x = temperature, 
    y = rainfall)) + 
geom_point(
  mapping = aes(colour = season_name), 
  size = 2,
  show.legend = FALSE) + 
geom_rug() + 
facet_wrap(vars(season_name)) + 
theme_bw()
```

]]]
]]

.column.bg-main3[.content.vtop.center[
.pad1[.font2[
![](slides_files/figure-html/add_theme2-1.png)&lt;!-- --&gt;

]]
]]





&lt;!-- *********** NEW SLIDE ************** --&gt;
---
class: split-50 bg-main1

.column.bg-main1[.content.vtop.center[

.pull.left[.pad1[.font2[
Make nicer titles

```r
ggplot(
  data = beaches,
  mapping = aes(
    x = temperature, 
    y = rainfall)) + 
geom_point(
  mapping = aes(colour = season_name), 
  size = 2,
  show.legend = FALSE) +  
geom_rug() + 
facet_wrap(vars(season_name)) + 
theme_bw() +
*labs(
* title = "Sydney weather by season",
* subtitle = "Data from 2013 to 2018",
* x = "Temperature (Celsius)",
* y = "Rainfall (mm)"
*) 
```

]]]
]]

.column.bg-main3[.content.vtop.center[
.pad1[.font2[
![](slides_files/figure-html/add_titles-1.png)&lt;!-- --&gt;

]]
]]




&lt;!-- *********** NEW SLIDE ************** --&gt;
---
class: split-50 bg-main1

.column.bg-main1[.content.vtop.center[
.pull.left[.pad1[.font2[
Done! Our plotcake is baked.

```r
ggplot(
  data = beaches,
  mapping = aes(
    x = temperature, 
    y = rainfall)) + 
geom_point(
  mapping = aes(colour = season_name), 
  size = 2,
  show.legend = FALSE) +  
geom_rug() + 
facet_wrap(vars(season_name)) + 
theme_bw() +
labs( 
  title = "Sydney weather by season", 
  subtitle = "Data from 2013 to 2018", 
  x = "Temperature (Celsius)", 
  y = "Rainfall (mm)" 
) 
```
]]]
]]

.column.bg-main3[.content.vtop.center[
.pad1[.font2[
![](slides_files/figure-html/done-1.png)&lt;!-- --&gt;

]]
]]





&lt;!-- *********** NEW SLIDE ************** --&gt;
---
class: bg-main1

.content.vtop.center[
.pull.left[.pad1[.font2[
Ingredients of this plot/cake 
- Data
- Aesthetics
- Layers
- Facets
- Theme
- Labels
- (Coordinates)
- (Scales)
]]]
]






&lt;!-- *********** NEW SLIDE ************** --&gt;
---

class: white bg-black center middle hide-slide-number

.pad1[
.font4[
Exercise 02&lt;br&gt;
]]



&lt;!-- *********** NEW SLIDE ************** --&gt;
---

class: bg-main1 center middle hide-slide-number

.reveal-text.bg-main2[.pad1[
.font4[Introducing ggplot objects]
]]




&lt;!-- *********** NEW SLIDE ************** --&gt;
---
class: split-50 bg-main1

.column.bg-main1[.content.vtop.center[

.pull.left[.pad1[.font2[
Let's create a plot with no layers!

```r
pic &lt;- ggplot(
  data = beaches,
  mapping = aes(x = temperature) 
) + 
facet_wrap(vars(season_name)) + 
theme_bw() +
labs( 
  title = "Sydney temperature by season", 
  subtitle = "Data from 2013 to 2018", 
  x = "Temperature (Celsius)", 
  y = "" 
) 
```

]]]
]]

.column.bg-main3[.content.vtop.center[
.pad1[.font2[


]]
]]





&lt;!-- *********** NEW SLIDE ************** --&gt;
---
class: split-50 bg-main1

.column.bg-main1[.content.vtop.center[

.pull.left[.pad1[.font2[
Let's create a plot with no layers!

```r
pic &lt;- ggplot(
  data = beaches,
  mapping = aes(x = temperature) 
) + 
facet_wrap(vars(season_name)) + 
theme_bw() +
ggtitle( 
  label = "Sydney temperature by season",
  subtitle = "Data from 2013 to 2018"
) +
xlab("Temperature (Celsius)") +
ylab("") 

*plot(pic)
```

]]]
]]

.column.bg-main3[.content.vtop.center[
.pad1[.font2[
![](slides_files/figure-html/baseplot_plotted-1.png)&lt;!-- --&gt;

]]
]]





&lt;!-- *********** NEW SLIDE ************** --&gt;
---
class: split-50 bg-main1

.column.bg-main1[.content.vtop.center[

.pull.left[.pad1[.font2[
Let's create a plot with no layers!

```r
pic &lt;- ggplot(
  data = beaches,
  mapping = aes(x = temperature) 
) + 
facet_wrap(vars(season_name)) + 
theme_bw() +
ggtitle( 
  label = "Sydney temperature by season",
  subtitle = "Data from 2013 to 2018"
) +
xlab("Temperature (Celsius)") +
ylab("") 

*print(pic)
```

]]]
]]

.column.bg-main3[.content.vtop.center[
.pad1[.font2[
![](slides_files/figure-html/baseplot_printed-1.png)&lt;!-- --&gt;

]]
]]




&lt;!-- *********** NEW SLIDE ************** --&gt;
---
class: bg-main1

.content.vtop.center[
.pull.left[.pad1[.font2[
What are you????

```r
class(pic)
```

```
## [1] "gg"     "ggplot"
```
]]]
]




&lt;!-- *********** NEW SLIDE ************** --&gt;
---
class: bg-main1

.content.vtop.center[
.pull.left[.pad4[.font1[

```r
summary(pic)
```

```
## data: date, year, month, day, season, rainfall, temperature,
##   enterococci, month_name, season_name [344x10]
## mapping:  x = ~temperature
## faceting: &lt;ggproto object: Class FacetWrap, Facet, gg&gt;
##     compute_layout: function
##     draw_back: function
##     draw_front: function
##     draw_labels: function
##     draw_panels: function
##     finish_data: function
##     init_scales: function
##     map_data: function
##     params: list
##     setup_data: function
##     setup_params: function
##     shrink: TRUE
##     train_scales: function
##     vars: function
##     super:  &lt;ggproto object: Class FacetWrap, Facet, gg&gt;
```
]]]
]




&lt;!-- *********** NEW SLIDE ************** --&gt;
---
class: bg-main1

.content.vtop.center[
.pull.left[.pad1[.font2[
Okaaaay .... what are the *names* of the things in you????

```r
names(pic)
```

```
## [1] "data"        "layers"      "scales"      "mapping"     "theme"      
## [6] "coordinates" "facet"       "plot_env"    "labels"
```
]]]
]




&lt;!-- *********** NEW SLIDE ************** --&gt;
---
class: bg-main1

.content.vtop.center[
.pull.left[.pad1[.font2[
Example 1: data

```r
pic$data
```

```
## # A tibble: 344 x 10
##    date        year month   day season rainfall temperature enterococci
##    &lt;date&gt;     &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;  &lt;dbl&gt;    &lt;dbl&gt;       &lt;dbl&gt;       &lt;dbl&gt;
##  1 2013-01-02  2013     1     2      1      0          23.4         6.7
##  2 2013-01-06  2013     1     6      1      0          30.3         2  
##  3 2013-01-12  2013     1    12      1      0          31.4        69.1
##  4 2013-01-18  2013     1    18      1      0          46.4         9  
##  5 2013-01-24  2013     1    24      1      0          27.5        33.9
##  6 2013-01-30  2013     1    30      1      0.6        26.6        26.5
##  7 2013-02-05  2013     2     5      1      0.1        25.7        66.9
##  8 2013-02-11  2013     2    11      1      8          22.2       118. 
##  9 2013-02-17  2013     2    17      1     13.6        26.3        75  
## 10 2013-02-23  2013     2    23      1      7.2        24.8       311. 
## # ... with 334 more rows, and 2 more variables: month_name &lt;chr&gt;,
## #   season_name &lt;chr&gt;
```
]]]
]




&lt;!-- *********** NEW SLIDE ************** --&gt;
---
class: bg-main1

.content.vtop.center[
.pull.left[.pad1[.font2[
Example 2: mapping

```r
pic$mapping
```

```
## Aesthetic mapping: 
## * `x` -&gt; `temperature`
```
]]]
]


&lt;!-- *********** NEW SLIDE ************** --&gt;
---
class: bg-main1

.content.vtop.center[
.pull.left[.pad1[.font2[
Quick overview: 
- data: the actual data
- layers: what to plot and how to render it
- scales: how to render x-axis, colour
- mapping: which variables map to which scales
- theme: visual styling information
- coordinates: how to lay it out? Cartesian, polar, etc?
- facet: how to break the plot into facets
- plot_env: environment in which to do computation
- labels: axis labels, titles etc.
]]]
]


&lt;!-- *********** NEW SLIDE ************** --&gt;
---

class: center middle hide-slide-number

.pad1[
.font4[
Exercise: Peeking inside the gg object &lt;br&gt;
https://djnavarro.github.io/some_url_here
]]


&lt;!-- *********** NEW SLIDE ************** --&gt;
---

class: bg-main1 center middle hide-slide-number

.reveal-text.bg-main2[.pad1[
.font4[Layers]
]]



&lt;!-- *********** NEW SLIDE ************** --&gt;
---
class: split-40 bg-main1

.column.bg-main1[.content.vtop.center[

.pull.left[.pad1[.font2[
Layers can compute things!

```r
pic 
```


]]]
]]


.column.bg-main3[.content.vtop.center[
.pad1[.font2[
![](slides_files/figure-html/no_histogram-1.png)&lt;!-- --&gt;

]]
]]




&lt;!-- *********** NEW SLIDE ************** --&gt;
---
class: split-40 bg-main1

.column.bg-main1[.content.vtop.center[

.pull.left[.pad1[.font2[
Layers can compute things!

```r
*pic_hist &lt;- pic +
* geom_histogram()

pic_hist
```

- histograms are not "in the data"
- this is computed by the layer...
- (...sort of)

]]]
]]


.column.bg-main3[.content.vtop.center[
.pad1[.font2[
![](slides_files/figure-html/add_histogram-1.png)&lt;!-- --&gt;

]]
]]



&lt;!-- *********** NEW SLIDE ************** --&gt;
---
class: split-40 bg-main1

.column.bg-main1[.content.vtop.center[

.pull.left[.pad1[.font2[
Layers can compute things!

```r
pic_hist &lt;- pic + 
  geom_histogram() 

*pic_dens &lt;- pic +
* geom_density()

pic_dens
```


]]]
]]


.column.bg-main3[.content.vtop.center[
.pad1[.font2[
![](slides_files/figure-html/add_density-1.png)&lt;!-- --&gt;

]]
]]






&lt;!-- *********** NEW SLIDE ************** --&gt;
---
class: split-50 bg-main1

.column.bg-main1[.content.vtop.center[
.pull.left[.pad1[.font2[
The layer information... density

```r
pic_dens$layers
```

```
## [[1]]
## geom_density: na.rm = FALSE
## stat_density: na.rm = FALSE
## position_identity
```

Each layer specifies:
- A geom: the graphical object to be drawn
- A stat: what "statistic" it is applied to
- A position: how it is placed

]]]
]]
--

.column.bg-main3[.content.vtop.center[
.pull.left[.pad1[.font2[
The layer information... histogram

```r
pic_hist$layers
```

```
## [[1]]
## geom_bar: na.rm = FALSE
## stat_bin: binwidth = NULL, bins = NULL, na.rm = FALSE, pad = FALSE
## position_stack
```

&lt;br&gt;
- There is hidden complexity!
- It's a bit weird
- Let's dig into this...


]]]
]]




&lt;!-- *********** NEW SLIDE ************** --&gt;
---
class: split-40 bg-main1

.column.bg-main1[.content.vtop.center[
.pull.left[.pad1[.font2[
Our histogram...

```r
pic + geom_histogram(
  stat = "bin",
  position = "stack"
) 
```

]]]
]]


.column.bg-main3[.content.vtop.center[
.pad1[.font2[
![](slides_files/figure-html/unnamed-chunk-26-1.png)&lt;!-- --&gt;

]]
]]





&lt;!-- *********** NEW SLIDE ************** --&gt;
---
class: split-40 bg-main1

.column.bg-main1[.content.vtop.center[
.pull.left[.pad1[.font2[
The exact same histogram!

```r
pic + stat_bin(
  geom = "bar",
  position = "stack"
) 
```
- How would we check?
- Is it exactly the same?
]]]
]]


.column.bg-main3[.content.vtop.center[
.pad1[.font2[
![](slides_files/figure-html/unnamed-chunk-28-1.png)&lt;!-- --&gt;


]]
]]





&lt;!-- *********** NEW SLIDE ************** --&gt;
---
class: split-40 bg-main1

.column.bg-main1[.content.vtop.center[
.pull.left[.pad1[.font2[
Changing the default geom?

```r
pic + stat_bin(
  geom = "point",
  position = "stack"
) 
```

]]]
]]


.column.bg-main3[.content.vtop.center[
.pad1[.font2[
![](slides_files/figure-html/unnamed-chunk-30-1.png)&lt;!-- --&gt;
]]
]]





&lt;!-- *********** NEW SLIDE ************** --&gt;
---
class: split-40 bg-main1

.column.bg-main1[.content.vtop.center[
.pull.left[.pad1[.font2[
Another way to do the same thing

```r
pic + geom_point(
  stat = "bin",
  position = "stack"
) 
```

]]]
]]


.column.bg-main3[.content.vtop.center[
.pad1[.font2[
![](slides_files/figure-html/unnamed-chunk-32-1.png)&lt;!-- --&gt;
]]
]]





&lt;!-- *********** NEW SLIDE ************** --&gt;
---
class: split-50 bg-main1

.column.bg-main1[.content.vtop.center[
.pull.left[.pad1[.font2[

&lt;br&gt;
## [But whhhyyyyy??????](https://cran.r-project.org/web/packages/ggplot2/vignettes/extending-ggplot2.html)

"Next we write a layer function. Unfortunately, due to an early design mistake I called these either stat\_() or geom\_(). A better decision would have been to call them layer\_() functions: that’s a more accurate description because every layer involves a stat and a geom."


]]]
]]
--
.column.bg-main3[.content.vmiddle.center[

&lt;img src="images/hadley.gif", width="70%"&gt;

[Hadley Wickham](https://cran.r-project.org/web/packages/ggplot2/vignettes/extending-ggplot2.html)

]]


&lt;!-- *********** NEW SLIDE ************** --&gt;
---

class: center middle hide-slide-number

.pad1[
.font4[
Exercise: Playing with the layers&lt;br&gt;
https://djnavarro.github.io/some_url_here
]]





&lt;!-- *********** NEW SLIDE ************** --&gt;
---

class: bg-main1 center middle hide-slide-number

.reveal-text.bg-main2[.pad1[
.font4[Where are we up to?]
]]



&lt;!-- *********** NEW SLIDE ************** --&gt;
---
class: bg-main1

.content.vtop.center[
.pull.left[.pad1[.font2[
Ingredients we (kind of) understand
- .orange[Data] ... the tibble / data frame
- .orange[Aesthetics] ... the mappings
- .orange[Layers] ... stats, geoms and positions
- .orange[Facets] ... relatively simple (sort of)
- .orange[Labels] ... relatively simple
- Theme
- Coordinates
- Scales
]]]
]



&lt;!-- *********** NEW SLIDE ************** --&gt;
---
class: bg-main1

.content.vtop.center[
.pull.left[.pad1[.font2[
Ingredients that are made of magic sauce
- Data 
- Aesthetics
- Layers
- Facets
- Labels
- .orange[Theme] ... what if I want to tinker?
- .orange[Coordinates] ... what's this about? 
- .orange[Scales] ... what's this about?
]]]
]





&lt;!-- *********** NEW SLIDE ************** --&gt;
---
class: bg-main1

.content.vtop.center[
.pull.left[.pad1[.font2[
The rest of the banquet
- .orange[Extensions] ... how are ggplot extensions made?
- .orange[Animations] ... how do I make awesome gifs?
- .orange[Geospatial] ... maps, how are they made?
]]]
]



&lt;!-- *********** NEW SLIDE ************** --&gt;
---

class: bg-main1 center middle hide-slide-number

.reveal-text.bg-main2[.pad1[
.font4[Themes]
]]




&lt;!-- *********** NEW SLIDE ************** --&gt;
---

class: bg-main1 center middle hide-slide-number

.reveal-text.bg-main2[.pad1[
.font4[Coordinates]
]]



&lt;!-- *********** NEW SLIDE ************** --&gt;
---
class: split-40 bg-main1

.column.bg-main1[.content.vtop.center[
.pull.left[.pad1[.font2[
Some preprocessing...

```r
rain &lt;- beaches %&gt;% 
  group_by(month, year, season_name) %&gt;%
  summarise(
    rain = mean(rainfall)
  ) %&gt;%
  ungroup() %&gt;%
  spread(
    key = year, 
    value = rain
  )
```

]]]
]]


.column.bg-main3[.content.vtop.center[
.pad1[.font2[

```
## # A tibble: 12 x 8
##    month season_name `2013` `2014` `2015` `2016` `2017`  `2018`
##    &lt;dbl&gt; &lt;chr&gt;        &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;   &lt;dbl&gt;
##  1     1 Summer        0.10  0.933   4.6   12.1   2.08   4.24  
##  2     2 Summer        7.22  6.6     2.6    9.24  6.42   0.16  
##  3     3 Autumn        5.72  4.53    5.75  12.3   7.62   3.4   
##  4     4 Autumn        4.08  2.4     4.2    6.16 11.7    0.4   
##  5     5 Autumn        1.97  0.12    2.22   0.05  0.317  0.0167
##  6     6 Winter       23.3   2.85    2.96   4.27 11.5    4.04  
##  7     7 Winter        0     0       3.23   8.68  0      0.02  
##  8     8 Winter        2.08  5.43   12.4    0.2   1.56   0.633 
##  9     9 Spring        0.36 NA       6.32   2.3   0.3    0.08  
## 10    10 Spring        9.2   1.5     1.12   1.30  4.97  18     
## 11    11 Spring       NA     1.5     3.32   2.28  0.12  NA     
## 12    12 Summer        0     5.05   17.6    6.72  0     NA
```
]]
]]



&lt;!-- *********** NEW SLIDE ************** --&gt;
---
class: split-40 bg-main1

.column.bg-main1[.content.vtop.center[
.pull.left[.pad1[.font2[
A simple scatterplot

```r
ggplot(
  data = rain,
  mapping = aes(
    x = `2013`,
    y = `2017`,
    colour = season_name
  )
) + 
geom_point(size = 5) 
```

]]]
]]


.column.bg-main3[.content.vtop.center[
.pad1[.font2[
![](slides_files/figure-html/unnamed-chunk-36-1.png)&lt;!-- --&gt;
]]
]]




&lt;!-- *********** NEW SLIDE ************** --&gt;
---
class: split-40 bg-main1

.column.bg-main1[.content.vtop.center[
.pull.left[.pad1[.font2[
A simple scatterplot

```r
ggplot(
  data = rain,
  mapping = aes(
    x = `2013`,
    y = `2017`,
    colour = season_name
  )
) + 
geom_point(size = 5) + 
*geom_abline(
* slope = 1,
* intercept = 0
*) 
```

]]]
]]


.column.bg-main3[.content.vtop.center[
.pad1[.font2[
![](slides_files/figure-html/unnamed-chunk-38-1.png)&lt;!-- --&gt;
]]
]]






&lt;!-- *********** NEW SLIDE ************** --&gt;
---
class: split-40 bg-main1

.column.bg-main1[.content.vtop.center[
.pull.left[.pad1[.font2[
A simple scatterplot

```r
ggplot(
  data = rain,
  mapping = aes(
    x = `2013`,
    y = `2017`,
    colour = season_name
  )
) + 
geom_point(size = 5) + 
geom_abline( 
  slope = 1, 
  intercept = 0 
) + 
*coord_equal()
```

]]]
]]


.column.bg-main3[.content.vtop.center[
.pad1[.font2[
![](slides_files/figure-html/unnamed-chunk-40-1.png)&lt;!-- --&gt;
]]
]]





&lt;!-- *********** NEW SLIDE ************** --&gt;
---
class: split-40 bg-main1

.column.bg-main1[.content.vtop.center[
.pull.left[.pad1[.font2[
A simple scatterplot

```r
ggplot(
  data = rain,
  mapping = aes(
    x = `2013`,
    y = `2017`,
    colour = season_name
  )
) + 
geom_point(size = 5) + 
geom_abline( 
  slope = 1, 
  intercept = 0 
) + 
coord_equal(
* xlim = c(0, 25),
* ylim = c(0, 25)
)
```

]]]
]]


.column.bg-main3[.content.vtop.center[
.pad1[.font2[
![](slides_files/figure-html/unnamed-chunk-42-1.png)&lt;!-- --&gt;
]]
]]




&lt;!-- *********** NEW SLIDE ************** --&gt;
---
class: split-40 bg-main1

.column.bg-main1[.content.vtop.center[
.pull.left[.pad1[.font2[
A simple scatterplot

```r
ggplot(
  data = rain,
  mapping = aes(
    x = `2013`,
    y = `2017`,
    colour = season_name
  )
) + 
geom_point(size = 5) + 
geom_abline( 
  slope = 1, 
  intercept = 0 
) + 
*coord_cartesian(
  xlim = c(0, 25), 
  ylim = c(0, 25) 
)
```

]]]
]]


.column.bg-main3[.content.vtop.center[
.pad1[.font2[
![](slides_files/figure-html/unnamed-chunk-44-1.png)&lt;!-- --&gt;
]]
]]








&lt;!-- *********** NEW SLIDE ************** --&gt;
---
class: split-40 bg-main1

.column.bg-main1[.content.vtop.center[
.pull.left[.pad1[.font2[
A simple scatterplot

```r
ggplot(
  data = rain,
  mapping = aes(
    x =  month,
    y = `2017`,
    colour = season_name,
    fill = season_name
  )
) + 
geom_col()
```

]]]
]]


.column.bg-main3[.content.vtop.center[
.pad1[.font2[
![](slides_files/figure-html/unnamed-chunk-46-1.png)&lt;!-- --&gt;
]]
]]








&lt;!-- *********** NEW SLIDE ************** --&gt;
---
class: split-40 bg-main1

.column.bg-main1[.content.vtop.center[
.pull.left[.pad1[.font2[
A simple scatterplot

```r
ggplot(
  data = rain,
  mapping = aes(
    x =  month,
    y = `2017`,
    colour = season_name,
    fill = season_name
  )
) + 
geom_col() + 
*coord_polar()
```


]]]
]]


.column.bg-main3[.content.vtop.center[
.pad1[.font2[
![](slides_files/figure-html/unnamed-chunk-48-1.png)&lt;!-- --&gt;
]]
]]



&lt;!-- *********** NEW SLIDE ************** --&gt;
---

class: bg-main1 center middle hide-slide-number

.reveal-text.bg-main2[.pad1[
.font4[Scales]
]]



&lt;!-- *********** NEW SLIDE ************** --&gt;
---

class: bg-main1 center middle hide-slide-number

.reveal-text.bg-main2[.pad1[
.font4[Animation]
]]



&lt;!-- *********** NEW SLIDE ************** --&gt;
---

class: bg-main1 center middle hide-slide-number

.reveal-text.bg-main2[.pad1[
.font4[Maps]
]]


&lt;!-- *********** NEW SLIDE ************** --&gt;
---

class: bg-main1 center middle hide-slide-number

.reveal-text.bg-main2[.pad1[
.font4[Extensions]
]]





&lt;!-- *********** NEW SLIDE ************** --&gt;
---
class: split-50 bg-main1

.column.bg-main1[.content.vtop.center[
.pull.left[.pad1[.font2[

&lt;br&gt;
## [Writing ggplot2 extensions](https://cran.r-project.org/web/packages/ggplot2/vignettes/extending-ggplot2.html)

- Big ecosystem already
- Don't reinvent the wheel
- Learn some grid graphics
- Be prepared for weirdness

]]]
]]
--
.column.bg-main3[.content.vmiddle.center[

&lt;img src="images/ggplot2_extension.jpg", width="70%"&gt;

[Link to ggplot2 extension document](https://cran.r-project.org/web/packages/ggplot2/vignettes/extending-ggplot2.html)

]]




&lt;!-- *********** NEW SLIDE ************** --&gt;
---
class: split-60 bg-main1

.column.bg-main1[.content.vtop.center[
.pull.left[.pad1[.font2[
Geoms of (in)convenience?

- override defaults is easy... 
- ... but not always wise
- Exercises will have a better example


```r
geom_dothistogram &lt;- function(
  mapping = NULL, data = NULL, position = "stack", 
  ..., binwidth = NULL, bins = NULL, na.rm = FALSE, 
  show.legend = NA, inherit.aes = TRUE
){
  
  layer &lt;- stat_bin(
    mapping = mapping, data = data, 
    geom = "point", position = position,
    ..., binwidth = binwidth, bins = bins,
    na.rm = na.rm, show.legend = show.legend,
    inherit.aes = inherit.aes
  )
  
  return(layer)
}

*pic + geom_dothistogram(size = 3)
```

]]]
]]


.column.bg-main3[.content.vtop.center[
.pad1[.font2[
![](slides_files/figure-html/unnamed-chunk-50-1.png)&lt;!-- --&gt;
]]
]]





&lt;!-- *********** NEW SLIDE ************** --&gt;
---

class: bg-main1 middle center

.pull.left[.pad1[.font2[
- List of 
- Useful resources
- Goes here
]]]

&lt;!-- DONE --&gt;
---

class: bg-main1 middle center

## thank u, next
    </textarea>
<script src="libs/remark-latest.min.js"></script>
<script>var slideshow = remark.create({
"ratio": "16:9",
"highlightStyle": "github",
"highlightLines": true,
"countIncrementalSlides": false
});
if (window.HTMLWidgets) slideshow.on('afterShowSlide', function (slide) {
  window.dispatchEvent(new Event('resize'));
});
(function() {
  var d = document, s = d.createElement("style"), r = d.querySelector(".remark-slide-scaler");
  if (!r) return;
  s.type = "text/css"; s.innerHTML = "@page {size: " + r.style.width + " " + r.style.height +"; }";
  d.head.appendChild(s);
})();</script>

<script>
(function() {
  var i, text, code, codes = document.getElementsByTagName('code');
  for (i = 0; i < codes.length;) {
    code = codes[i];
    if (code.parentNode.tagName !== 'PRE' && code.childElementCount === 0) {
      text = code.textContent;
      if (/^\\\((.|\s)+\\\)$/.test(text) || /^\\\[(.|\s)+\\\]$/.test(text) ||
          /^\$\$(.|\s)+\$\$$/.test(text) ||
          /^\\begin\{([^}]+)\}(.|\s)+\\end\{[^}]+\}$/.test(text)) {
        code.outerHTML = code.innerHTML;  // remove <code></code>
        continue;
      }
    }
    i++;
  }
})();
</script>
<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
(function () {
  var script = document.createElement('script');
  script.type = 'text/javascript';
  script.src  = 'https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML';
  if (location.protocol !== 'file:' && /^https?:/.test(script.src))
    script.src  = script.src.replace(/^https?:/, '');
  document.getElementsByTagName('head')[0].appendChild(script);
})();
</script>
  </body>
</html>
